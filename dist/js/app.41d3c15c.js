(function(e){function t(t){for(var s,l,r=t[0],o=t[1],d=t[2],c=0,m=[];c<r.length;c++)l=r[c],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&m.push(n[l][0]),n[l]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,r=1;r<i.length;r++){var o=i[r];0!==n[o]&&(s=!1)}s&&(a.splice(t--,1),e=l(l.s=i[0]))}return e}var s={},n={app:0},a=[];function l(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=s,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(i,s,function(t){return e[t]}.bind(null,s));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var u=o;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"01bc":function(e,t,i){"use strict";i("d47f")},"034f":function(e,t,i){"use strict";i("85ec")},"56d7":function(e,t,i){"use strict";i.r(t);var s=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("EditableTable",{attrs:{fields:e.fields},on:{submit:function(t){return e.handleUpdateUser(t)},remove:function(t){return e.handleRemoveUser(t)}},model:{value:e.users,callback:function(t){e.users=t},expression:"users"}})],1)},a=[],l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",[i("b-modal",{attrs:{id:"modal-1",title:"Confirm","ok-title":"Remove"},on:{ok:e.removeRowsHandler},model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[i("p",{staticClass:"my-4"},[e._v("Are you sure you want to remove the selected rows?")])]),i("div",{staticClass:"action-container"},[i("b-button",{staticClass:"add-button",attrs:{variant:"success"},on:{click:e.addRowHandler}},[e._v("Add Row")]),i("b-button",{attrs:{variant:"danger"},on:{click:function(t){e.openDialog=!0}}},[e._v("Remove Rows")])],1),i("b-table",{staticClass:"b-table",attrs:{items:e.tableItems,fields:e.fields,fixed:""},scopedSlots:e._u([e._l(e.fields,(function(t,s){return{key:"cell("+t.key+")",fn:function(n){return["date"===t.type&&e.tableItems[n.index].isEdit?i("b-form-datepicker",{key:s,attrs:{type:t.type,value:e.tableItems[n.index][t.key]},on:{input:function(i){return e.inputHandler(i,n.index,t)}}}):"select"===t.type&&e.tableItems[n.index].isEdit?i("b-form-select",{key:s,attrs:{value:e.tableItems[n.index][t.key],options:t.options},on:{input:function(i){return e.inputHandler(i,n.index,t)}}}):"selectRow"===t.key?i("b-checkbox",{key:s,attrs:{checked:e.tableItems[n.index].isSelected},on:{change:function(t){return e.selectRowHandler(n)}}}):"edit"===t.type?i("div",{key:s},[i("b-button",{attrs:{disabled:e.disableButton(n)},on:{click:function(i){return e.editRowHandler(n,t)}}},[e.tableItems[n.index].isEdit?i("span",[e._v("Done")]):i("span",[e._v("Edit")])]),e.tableItems[n.index].isEdit?e._e():i("b-button",{staticClass:"delete-button",attrs:{variant:"danger"},on:{click:function(t){return e.removeRowHandler(n.index)}}},[e._v("Remove")])],1):t.type&&e.tableItems[n.index].isEdit?i("b-form-input",{key:s,attrs:{type:t.type,value:e.tableItems[n.index][t.key],required:t.required,pattern:t.pattern,state:e.tableItems[n.index].validity[t.key]},on:{blur:function(i){return e.inputHandler(i,n.index,t)}}}):i("span",{key:s},[e._v(e._s(n.value))])]}}}))],null,!0)})],1)},r=[],o={name:"EditableTable",components:{},props:{value:Array,fields:Array},data(){return{tableItems:this.mapItems(this.value),openDialog:!1}},watch:{value(e){this.tableItems=this.mapItems(e)}},methods:{editRowHandler(e){this.tableItems[e.index].isEdit&&this.$emit("submit",this.tableItems[e.index]),this.tableItems[e.index].isEdit=!this.tableItems[e.index].isEdit,this.tableItems[e.index].validity={},this.$set(this.tableItems,e.index,this.tableItems[e.index])},inputHandler(e,t,i){e.target.validity.valid?((i.required||i.patter)&&(this.tableItems[t].validity[i.key]=!0),this.tableItems[t][i.key]=e.target.value,this.$set(this.tableItems,t,this.tableItems[t]),this.$emit("input",this.tableItems)):(this.tableItems[t].validity[i.key]=!1,this.$set(this.tableItems,t,this.tableItems[t]))},addRowHandler(){const e=this.fields.reduce((e,t)=>({...e,[t.key]:null}),{});e.isEdit=!0,e.validity={},this.tableItems.unshift(e),this.$emit("input",this.tableItems)},removeRowHandler(e){this.tableItems=this.tableItems.filter((t,i)=>i!==e),this.$emit("input",this.tableItems),this.$emit("remove",this.tableItems[e])},removeRowsHandler(){const e=this.tableItems.filter(e=>e.isSelected);this.tableItems=this.tableItems.filter(e=>!e.isSelected),this.$emit("input",this.tableItems),this.$emit("remove",e)},selectRowHandler(e){this.tableItems[e.index].isSelected=!this.tableItems[e.index].isSelected},disableButton(e){return Object.values(e.item.validity).some(e=>!e)},mapItems(e){return e.map((e,t)=>({...e,isEdit:!!this.tableItems[t]&&this.tableItems[t].isEdit,isSelected:!!this.tableItems[t]&&this.tableItems[t].isSelected,validity:this.tableItems[t]?this.tableItems[t].validity:{}}))}}},d=o,u=(i("01bc"),i("2877")),c=Object(u["a"])(d,l,r,!1,null,null,null),m=c.exports;const b=async()=>{const e=await fetch("https://jsonplaceholder.typicode.com/users"),t=await e.json();return t},p=async e=>{const t=await fetch("https://jsonplaceholder.typicode.com/users/"+e.id,{method:"PATCH",body:JSON.stringify(e)}),i=await t.json();return i},h=async e=>{const t=await fetch("https://jsonplaceholder.typicode.com/users",{method:"POST",body:JSON.stringify(e)}),i=await t.json();return i},f=async e=>{const t=await fetch("https://jsonplaceholder.typicode.com/users/"+e,{method:"DELETE"}),i=await t.json();return i};var y={name:"App",components:{EditableTable:m},data(){return{fields:[{key:"selectRow",label:"",class:"select-width"},{key:"name",label:"Name",type:"text",required:!0},{key:"email",label:"Email",type:"email",required:!0,pattern:".+@bootstrapvue\\.com"},{key:"phone",label:"Phone",type:"text"},{key:"edit",label:"",type:"edit"}],users:[]}},async mounted(){this.users=await b()},methods:{async handleUpdateUser(e){e.id?await p(e):await h(e)},async handleRemoveUser(e){e.length>0?await e.map(async e=>{await f(e.id)}):await f(e.id)}}},v=y,I=(i("034f"),Object(u["a"])(v,n,a,!1,null,null,null)),w=I.exports,x=i("5f5b"),k=i("b1e0");i("f9e3"),i("2dd8");s["default"].use(x["a"]),s["default"].use(k["a"]),s["default"].config.productionTip=!1,new s["default"]({render:e=>e(w)}).$mount("#app")},"85ec":function(e,t,i){},d47f:function(e,t,i){}});
//# sourceMappingURL=app.41d3c15c.js.map